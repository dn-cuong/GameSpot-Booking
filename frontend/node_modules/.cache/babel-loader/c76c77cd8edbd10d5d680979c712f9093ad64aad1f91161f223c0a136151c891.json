{"ast":null,"code":"const handleLogin = async e => {\n  e.preventDefault();\n  setError('');\n  setSuccessMessage('');\n  try {\n    const response = await axios.post('/login', {\n      usf_mail: usfEmail,\n      password: password\n    });\n    const token = response.data[\"token\"];\n    console.log(token);\n    localStorage.setItem('jwt', token);\n    const userData = JSON.parse(atob(token.split('.')[1]));\n    localStorage.setItem('usf_id', userData.usf_id);\n    onLogin(userData.usf_id);\n    console.log(userData.usf_role);\n    setSuccessMessage('Login successfully! Redirecting...');\n\n    // Thay thế window.location.href bằng navigate\n    if (userData.usf_role === \"admin\") {\n      navigate(\"/dashboard\"); // Điều hướng đến dashboard cho admin\n    } else {\n      navigate(\"/\"); // Điều hướng đến trang chính cho người dùng không phải admin\n    }\n  } catch (e) {\n    if (e.response && e.response.data) {\n      setError(e.response.data);\n    } else {\n      setError('Login failed. Please try again.');\n    }\n  }\n};","map":{"version":3,"names":["handleLogin","e","preventDefault","setError","setSuccessMessage","response","axios","post","usf_mail","usfEmail","password","token","data","console","log","localStorage","setItem","userData","JSON","parse","atob","split","usf_id","onLogin","usf_role","navigate"],"sources":["/Users/mit/booking-systemm/src/pages/Login/Login.js"],"sourcesContent":["const handleLogin = async (e) => {\n    e.preventDefault();\n    setError('');\n    setSuccessMessage('');\n    \n    try {\n        const response = await axios.post('/login', {\n            usf_mail: usfEmail,\n            password: password,\n        });\n        const token = response.data[\"token\"];\n        console.log(token);\n        localStorage.setItem('jwt', token);\n        \n        const userData = JSON.parse(atob(token.split('.')[1])); \n        localStorage.setItem('usf_id', userData.usf_id);\n        onLogin(userData.usf_id);\n        console.log(userData.usf_role);\n        setSuccessMessage('Login successfully! Redirecting...');\n        \n        // Thay thế window.location.href bằng navigate\n        if (userData.usf_role === \"admin\") {\n            navigate(\"/dashboard\"); // Điều hướng đến dashboard cho admin\n        } else {\n            navigate(\"/\"); // Điều hướng đến trang chính cho người dùng không phải admin\n        }\n    } catch (e) {\n        if (e.response && e.response.data) {\n            setError(e.response.data);\n        } else {\n            setError('Login failed. Please try again.');\n        }\n    }\n};\n"],"mappings":"AAAA,MAAMA,WAAW,GAAG,MAAOC,CAAC,IAAK;EAC7BA,CAAC,CAACC,cAAc,CAAC,CAAC;EAClBC,QAAQ,CAAC,EAAE,CAAC;EACZC,iBAAiB,CAAC,EAAE,CAAC;EAErB,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACC,IAAI,CAAC,QAAQ,EAAE;MACxCC,QAAQ,EAAEC,QAAQ;MAClBC,QAAQ,EAAEA;IACd,CAAC,CAAC;IACF,MAAMC,KAAK,GAAGN,QAAQ,CAACO,IAAI,CAAC,OAAO,CAAC;IACpCC,OAAO,CAACC,GAAG,CAACH,KAAK,CAAC;IAClBI,YAAY,CAACC,OAAO,CAAC,KAAK,EAAEL,KAAK,CAAC;IAElC,MAAMM,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACT,KAAK,CAACU,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACtDN,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEC,QAAQ,CAACK,MAAM,CAAC;IAC/CC,OAAO,CAACN,QAAQ,CAACK,MAAM,CAAC;IACxBT,OAAO,CAACC,GAAG,CAACG,QAAQ,CAACO,QAAQ,CAAC;IAC9BpB,iBAAiB,CAAC,oCAAoC,CAAC;;IAEvD;IACA,IAAIa,QAAQ,CAACO,QAAQ,KAAK,OAAO,EAAE;MAC/BC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC;IAC5B,CAAC,MAAM;MACHA,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;IACnB;EACJ,CAAC,CAAC,OAAOxB,CAAC,EAAE;IACR,IAAIA,CAAC,CAACI,QAAQ,IAAIJ,CAAC,CAACI,QAAQ,CAACO,IAAI,EAAE;MAC/BT,QAAQ,CAACF,CAAC,CAACI,QAAQ,CAACO,IAAI,CAAC;IAC7B,CAAC,MAAM;MACHT,QAAQ,CAAC,iCAAiC,CAAC;IAC/C;EACJ;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}